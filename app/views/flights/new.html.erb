<script type="text/javascript">var tripId = <%= @trip.id %>;
</script>

      <div ng-app="app">
        <div ng-controller="flightsCtrl" ng-init="setup()">
          <h1>Add New Flight</h1>

          <ul class="collapsible" data-collapsible="accordion">
            <li>
              <div class="collapsible-header"><i class="material-icons">search</i>Search for Flights</div>
               <div class="collapsible-body">
                  <div class="container">
                    <div class="row">
                      <form class="col s12">
                        <div class="row">
                          <div class="input-field col s6">
                            <input id="origin" type="text" ng-model="origin"></input>
                            <label for="origin">Origin</label>
                          </div>
                          <div class="input-field col s6">
                            <input id="destination" type="text" ng-model="destination"></input>
                            <label for="destination">Destination</label>
                          </div>
                        </div>
                        <div>
                          <input ng-model="date" placeholder="YYYY-MM-DD"></input>
                          <label>Date</label>
                        </div>
                        <br>
                        <div>
                          <input type="submit" class="btn btn-default" value="Search" ng-click="searchFlights(origin, destination, date)"></input>
                        </div>
                  </form>
                  <br>
                  </div>

                  <div>
                      <div ng-repeat="result in results" class="container">
                        <div class="row">
                          <div class="col s4">
                            <p>{{ result.carrier}}</p>
                          </div>
                          <div class="col s4">
                            <p>No. {{ result.flightNumber}}</p>
                          </div>
                          <div class="col s4">
                            <h5>${{ result.price}}</h5>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col s6">
                            <p>Depart: {{ result.departureTime | date: 'medium' }}</p>
                          </div>
                          <div class="col s6">
                            <p>Arrive: {{ result.arrivalTime | date: 'medium' }}</p>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col s6 center-align">
                            <input ng-model="flightDirection" name="flightDirection" type="radio" id="departing" value="departing" class="with-gap"/>
                            <label for="departing">Departure Flight</label>
                          </div>
                          <div class="col s6 center-align">
                            <input ng-model="flightDirection"name="flightDirection" type="radio" id="arriving" value="arriving" class="with-gap"/>
                            <label for="arriving">Return Flight</label>
                          </div>
                        </div>
                        <div class="row left-align">
                          <a href="/trips/<%=params[:trip_id]%>"
                             class="waves-effect waves-light btn left-align" 
                             ng-click="addFlight(result.carrier, 
                                                 result.flightNumber, 
                                                 result.departureTime, 
                                                 result.arrivalTime, 
                                                 result.price,
                                                 origin,
                                                 destination,
                                                 flightDirection)">Add</a>
                        </div>
                        <div class="divider">
                      </div>

                      <!-- <table class="highlight">
                      <thead class="center-align">
                        <th>Airline</th>
                        <th>Flight No.</th>
                        <th>Departure Time</th>
                        <th>Arrival Time</th>
                        <th>Price</th>
                        <th>Flight Direction</th>
                        <th>Add</th>
                      </thead>
                      <tbody ng-repeat="result in results"> -->
                       <!--  <tr>
                          <td>{{ result.carrier}}</td>
                          <td>{{ result.flightNumber}}</td>
                          <td>{{ result.departureTime | date: 'medium' }}</td>
                          <td>{{ result.arrivalTime | date: 'medium' }}</td>
                          <td>{{ result.price }}</td>
                          <td>                            
                            <div>
                              <input ng-model="flightDirection" name="flightDirection" type="radio" id="departing" value="departing" class="with-gap"/>
                              <label for="departing">Departure Flight</label>
                              <input ng-model="flightDirection"name="flightDirection" type="radio" id="arriving" value="arriving" class="with-gap"/>
                              <label for="arriving">Return Flight</label>
                            </div>
                          </td>
                          <td><a href="/trips/<%=params[:trip_id]%>/flights"
                             class="waves-effect waves-light btn" 
                             ng-click="addFlight(result.carrier, 
                                                 result.flightNumber, 
                                                 result.departureTime, 
                                                 result.arrivalTime, 
                                                 result.price,
                                                 flightDirection)">Add</a></td>
                        </tr>
                      </tbody>
                    </table> -->
                  </div>
                </div>
            </li>

            <li>
              <div class="collapsible-header"><i class="material-icons">mode_edit</i>Add New Flight</div>
                <div class="collapsible-body container" style="margin-top: 20px; margin-bottom: 50px">
                  
                  <%= form_tag "/trips/#{params[:trip_id]}/flights", {method: :post} do %>
                    <div>
                      <%= label_tag :depart_airport, "Departure Airport" %>
                      <%= text_field_tag :depart_airport %>
                    </div>
                    <div>
                      <%= label_tag :arrive_airport, "Arrival Airport" %>
                      <%= text_field_tag :arrive_airport %>
                    </div>
                    <div>
                      <%= label_tag :airline %>
                      <%= text_field_tag :airline %>
                    </div>
                    <div>
                      <%= label_tag :flight_number %>
                      <%= text_field_tag :flight_number %>
                    </div>
                    <div>
                      <%= label_tag :depart_time, "Departure Time" %>
                      <%= text_field_tag :depart_time %>
                    </div>
                    <div>
                      <%= label_tag :arrive_time, "Arrival Time" %>
                      <%= text_field_tag :arrive_time %>
                    </div>
                    <div>
                      <%= label_tag :price %>
                      <%= text_field_tag :price %>
                    </div>
                    <div>
                      <%= radio_button_tag(:flight_direction, "departing") %>
                      <%= label_tag(:flight_direction_departing, "Departure Flight") %>
                    </div>
                    <div>
                      <%= radio_button_tag(:flight_direction, "arriving") %>
                      <%= label_tag(:flight_direction_arriving, "Return Flight") %>
                    </div>
                    <div>
                      <%= hidden_field_tag :trip_id, params[:trip_id] %> 
                      <%= submit_tag "Add", class: "btn btn-default" %>
                    </div>
                  <% end %>

                  <br>
                </div>
            </li>
          
          </ul>
        </div>
      </div>
