<script type="text/javascript">var tripId = <%= @trip.id %>;</script>

<div class="row ">
  <nav>
    <div class="nav-wrapper blue-grey darken-1">
      <div class="col s12">
        <a href="/trips" class="breadcrumb">Trips</a>
        <a href="/trips/<%= params[:id] %>!" class="breadcrumb" style="padding: 20px"><%= @trip.title %></a>
      </div>
    </div>
  </nav>
</div>  


<div class="container">
<div class="row">
<div class="col s12 m9 l12">

  <div ng-app="app">
    <div ng-controller="tripsCtrl" ng-init="setup()">

      <div class="section">
        <div style="position: relative; height: 80px">
          <h1 class="center-align"><%= @trip.title %></h1> 
          <div class="fixed-action-btn horizontal click-to-toggle" style="position: absolute; right: 24px;">
              <a class="btn-floating btn-large teal accent-3" href="/trips/<%= @trip.id %>/edit">
                <i class="material-icons">mode_edit</i>
              </a>
          </div>
        </div>

        <div class="row center-align">
          <p class="col s2">City: <br><%= @trip.city %></p>
          <p class="col s2">State: <br><%= @trip.state %></p>
          <p class="col s2">Country: <br><%= @trip.country %></p>
          <p class="col s2">Start Date: <br><%= @trip.start_date.strftime("%b %d, %Y") %></p>
          <p class="col s2">End Date: <br><%= @trip.end_date.strftime("%b %d, %Y") %></p>
          <p class="col s2">Trip ID: <%= @trip.id %></p>
        </div>
      
      <div class="divider"></div>

      </div>

      <div class="section">
        <div style="position: relative; height: 80px">
          <h3 class="light center-align">Flights</h3>
            <div class="fixed-action-btn horizontal click-to-toggle" style="position: absolute; right: 24px;">
              <a class="btn-floating btn-large waves-effect teal accent-3" href="/trips/<%= @trip.id %>/flights/new">
                <i class="material-icons center-align">add</i>
              </a>
            </div>
        </div>

        <br>

        <div class="divider"></div>

        <div class="container">
          <br>
            <div class="row center-align">
              <div class="col s3">
                <button ng-click="changeOrderAttribute('rank')" class="waves-effect waves-light btn-flat">Rank</button>
              </div>
              <div class="col s3">  
                <button ng-click="changeOrderAttribute('price')" class="waves-effect waves-light btn-flat">Price</button>
              </div>
              <div class="col s3">
                <button ng-click="changeOrderAttribute('time')" class="waves-effect waves-light btn-flat">Time</button>
              </div>
              <div class="col s3">
                <button ng-click="changeOrderAttribute('airline')" class="waves-effect waves-light btn-flat">A-Z</button>
              </div>
            </div>
        </div>


        <div class="row list-row" >
          <div ng-repeat="flight in flights | orderBy:orderAttribute:orderDescending" class="col s4 card blue-grey lighten-3 " style="height: 250px; width: 300px; margin-left: 20px">
            <h5 class="card-title black-text">{{ flight.airline }} Flight No.  {{flight.flightNumber}}</h5> 
            <p>Type: {{flight.date}}</p> 
            <p>Price: {{flight.price}}</p> 
            <div class="card-action">
                <a href="/trips/<%=@trip.id%>/flights/{{flight.id}}">View</a>
                <%= link_to "Vote", "/trips/#{@trip.id}/flights/{{flight.id}}?rank=1", method: :patch %>
            </div>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="section">
        <div style="position: relative; height: 80px">
          <h3 class="light center-align">Accommodations</h3>
            <div class="fixed-action-btn horizontal click-to-toggle" style="position: absolute; right: 24px;">
              <a class="btn-floating btn-large waves-effect teal accent-3" href="/trips/<%= @trip.id %>/accommodations/new">
                <i class="material-icons center-align">add</i>
              </a>
            </div>
        </div>
      </div>
      <div class="section">
        <div class="divider"></div>
        <br>
        <div class="container">
          <div class="row center-align">
            <div class="col s3">
              <button ng-click="changeAccOrderAttribute('rank')" class="waves-effect waves-light btn-flat">Rank</button>
            </div>
            <div class="col s3">  
              <button ng-click="changeAccOrderAttribute('price')" class="waves-effect waves-light btn-flat">Price</button>
            </div>
            <div class="col s3">
              <button ng-click="changeAccOrderAttribute('propertyType')" class="waves-effect waves-light btn-flat">Type</button>
            </div>
            <div class="col s3">
              <button ng-click="changeAccOrderAttribute('name')" class="waves-effect waves-light btn-flat">A-Z</button>
            </div>
          </div>
        </div>

        <div class="row">
          <div ng-repeat="accommodation in accommodations | orderBy:orderAttribute:orderDescending" class="col s4 card blue-grey lighten-3 " style="width: 300px; margin-left: 20px; height: 250px">
            <h5 class="card-title black-text"> {{ accommodation.name }} </h5> 
            <p>Type: {{ accommodation.propertyType }} </p> 
            <p>Price: {{accommodation.price}}</p> 
            <div class="card-action">
              <a href="/trips/<%= @trip.id %>/accommodations/{{accommodation.id}}">View</a>
            </div>
          </div>
      
          <div class="col s3 card-panel valign-wrapper" style="height: 250px; width: 300px; margin-left: 20px; background-image: url(/map.png);">
            <h5 class="card-title black-text valign center-align"><a href="/trips/<%=@trip.id%>/maps">My Map</a></h5>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
</div>
</div>